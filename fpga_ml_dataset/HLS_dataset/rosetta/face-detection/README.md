# Face Detection

## Description
This design detects human faces from an image using the Viola Jones algorithm. The SDSoC design is directly adopted from the "Parallel and Pipelined" implementation by N. Srivastava et al. We rewrote the host code so the accelerator can also be executed on Xilinx OpenCL platforms. If you use this benchmark in your research, please also cite the FPGA'17 paper by N.Srivastava et al.:
```
  @inproceedings{srivastava-facedetect-fpga2017,
    title     = {Accelerating Face Detection on Programmable SoC Using C-Based Synthesis},
    author    = {Nitish Srivastava and Steve Dai and Rajit Manohar and Zhiru Zhang},
    booktitle = {25\textsuperscript{th} ACM/SIGDA International Symposium on Field-Programmable Gate Arrays},
    month     = {Feb},
    year      = {2017},
    doi       = {10.1145/3020078.3021753},
  }
```
## Major Optimizations
This design takes advantage of advanced memory optimizations:
1. The Viola-Jones algorithm operates on a sliding window of the input image. 
We modify the common line buffer and window buffer to efficienty compute the integral image. 
For more details please refer to [N. Srivastava et al.'s paper][1]. 
2. Classifiers of the Viola-Jones algorithm have different memory access patterns. 
In order to pipeline different classifier stages without too much resource overhead, we use a customized memory banking solution generated by a trace-based memory banking technique. 
For more details please refer to [Y. Zhou et al.'s paper][2]. 

[1]: http://www.csl.cornell.edu/~zhiruz/pdfs/facedetect-fpga2017.pdf
[2]: http://www.csl.cornell.edu/~zhiruz/pdfs/tracebank-fpga2017.pdf

## Usage
### SDAccel
To execute or simulate the design, do

`./face_detect_host.exe -f <path_to_xclbin_file> -o <path_to_output_image>`

### SDSoC
To run the SDSoC version on the board, do
`./face_detect.elf -o <path_to_output_image>`

### SW
To run the software version, do
`./face_detect_sw.exe -o <path_to_output_image>`
